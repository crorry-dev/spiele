{% extends 'includes/layout_busfahren.html' %}

{% block body %}
{% from "includes/_formhelpers.html" import render_field %}
<center>
    <h1>Busfahren - Runde {{ json_busfahren["round"]}}</h1>
    <hr>
    <div id="container-cards" style="width: 100%; padding: 5px; border: 3px solid #fff; text-align: center;">
    
    {% set count = namespace(value=0) %}
    {% for card in json_busfahren["map"] %}
    {% for c in card %}
        {% set count.value = count.value + 1 %}
        {% if count.value <= json_busfahren["round"] %}
        <div id="triangle_card" style="width:50px; height:75px; border-style:solid; border-radius:10px;position:relative; display:inline-block;margin-left: 10px;">
            <div id="corner-left" style="font-size: 8px; position:absolute; top:5px; left: 5px;;">{{ c[1] }}</div>
            <div id="coner-bottom-right" style="font-size: 8px; position:absolute; bottom:5px; right:5px;"> {{ c[1] }}</div>
            <!-- if c[0] == 11 print B ... -->
            <div id="card-value" style="font-size: 20px; position:absolute; top: 20px; left: 10px;"> {{ c[0] }}</div>
        </div>

        {% else %}
        <div id="triangle_card" style="width:50px; height:75px; border-style:solid; border-radius:10px;position:relative; display:inline-block;margin-left: 10px; background-color: gray;">
            <div id="card-value" style="font-size: 20px; position:absolute; top: 20px; left: 15px; color: white;">?</div>
        </div>
        {% endif %}

    {% endfor %}
    <br><br><br><br>
    {% endfor %}
    </div>
    <hr><hr>
    <h3>Meine Karten</h3>
    <p>Zum Legen die entsprechende Karte dr√ºcken</p>
    <br>

    <div id="container-cards" style="width: 100%; padding: 20px; border: 3px solid #fff; text-align: center;">
    {% for card in json_busfahren[session["nickname"]] %}
    <a href="/card/{{ loop.index - 1}}">
        <div id="triangle_card" style="width:100px; height:150px; border-style:solid; border-radius:10px;position:relative;display:inline-block;margin-left: 50px;">
            <div id="corner-left" style="font-size: 14px; position:absolute; top:5px; left: 5px;;">{{ card[1] }}</div>
            <div id="coner-bottom-right" style="font-size: 14px; position:absolute; bottom:5px; right:5px;">{{ card[1] }}</div>
            <div id="card-value" style="font-size: 28px; position:absolute; top: 50px; left: 35px;">{{ card[0] }}</div>
        </div>
    </a>
    {% endfor %}
    </div>

    <hr><hr>
    {% if not json_busfahren["status"][session["nickname"]] %}
    <form method="POST">
        <center><input type="submit" class="btn btn-outline-success btn-lg" value="Bereit" /></center>
    
    </form>
    {% else %}
    <h3>Du bist bereit!</h3>
    <a class="btn btn-outline-info btn-lg" href="/busfahren">refresh</a>
    {% endif %}
    <hr>
    <table class="table table-stripped" style="width: 50%;">
        <tr>
            <th>Nickname</th>
            <th>Status</th>
        </tr>
        {% for player in json_busfahren["status"] %}
        <tr>
            <td>{{ player }}</td>
            <td>{{ json_busfahren["status"][player] }}</td>
        </tr>
        {% endfor %}
    </table>

    <hr>
    <h3>Timeline</h3>
    <table class="table table-stripped" style="width: 50%;">
        <tr>
            <th>Nickname</th>
            <th>Gelegte Karte</th>
            <th>Runde</th>
        </tr>
        {% for t in json_busfahren["timeline"] %}
        <tr>
            <td>{{ t[0] }}</td>
            <td>{{ t[1] }}</td>
            <td>{{ t[2] }}</td>
        </tr>
        {% endfor %}

    </table>

</center>
{% endblock %}
